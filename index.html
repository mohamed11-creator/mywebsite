<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BusinessLinks</title>
<style>
  body { margin:0; font-family:'Impact', Charcoal, sans-serif; background:white; color:black; text-align:center; }
  
  /* Splash */
  #splash {
    position:fixed; top:0; left:0; width:100%; height:100%;
    display:flex; justify-content:center; align-items:center;
    font-size:3em; opacity:0;
    animation:fadeInOut 2s forwards;
    z-index:10; background:white;
  }
  @keyframes fadeInOut { 0%{opacity:0;}50%{opacity:1;}100%{opacity:0;} }

  /* Gallery */
  #gallery {
    display:none;
    flex-wrap:wrap;
    justify-content:center;
    gap:20px;
    padding:20px;
    display:flex;
  }
  .item {
    width:90%; max-width:250px;
    text-align:center;
    border-radius:12px;
    padding:10px;
    background:#f5f5f5;
    border:1px solid #ddd;
    transition:transform 0.3s, box-shadow 0.3s;
  }
  .item:hover { transform:scale(1.05); box-shadow:0 6px 20px rgba(0,0,0,0.25); }
  .item img { width:100%; border-radius:10px; border:2px solid #333; margin-bottom:8px; object-fit:cover; height:150px; }
  .item input.link-input {
    width:90%; margin-top:5px; text-align:center; padding:5px;
    border-radius:6px; border:1px solid #aaa;
  }
  .item a { display:block; margin-top:5px; color:#007BFF; text-decoration:none; font-weight:bold; word-wrap:break-word; }
  .item a:hover { text-decoration:underline; }
  button.upload-btn {
    margin-top:5px; padding:5px 10px;
    border:none; border-radius:6px;
    background:#007BFF; color:white;
    cursor:pointer; transition:background 0.3s;
  }
  button.upload-btn:hover { background:#0056b3; }

  @media(max-width:600px){ 
    #splash{font-size:2em;} 
    .item{max-width:90%;} 
    button.upload-btn{width:80%;}
    .item img { height:120px; }
  }
</style>
</head>
<body>

<div id="splash">BusinessLinks</div>
<div id="gallery"></div>

<script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
<script>
// Cloudinary config
const cloudName = 'dsaxcy1sm';
const uploadPreset = 'zrx3ywf6';
const folder = 'businesslinks_gallery';

const gallery = document.getElementById('gallery');
const totalSlots = 24;

// Load gallery images from Cloudinary folder
async function loadGallery() {
  const url = `https://res.cloudinary.com/${cloudName}/image/list/${folder}.json`;
  let images = [];
  try {
    const res = await fetch(url);
    const data = await res.json();
    images = data.resources.map(r => r.url);
  } catch(e){ console.log('No images yet', e); }

  for(let i=0;i<totalSlots;i++){
    const div = document.createElement('div');
    div.className = 'item';
    const imgUrl = images[i] || 'https://via.placeholder.com/250x150?text=Empty+Slot';
    div.innerHTML = `
      <img id="slot${i+1}" src="${imgUrl}" alt="Image ${i+1}">
      <button class="upload-btn" onclick="uploadToCloud(${i+1})">Upload Image</button>
      <input class="link-input" id="link${i+1}" placeholder="Enter link" oninput="updateLink(${i+1})">
      <a id="a${i+1}" href="#" target="_blank">Visit Link ${i+1}</a>
    `;
    gallery.appendChild(div);
  }
}

// Show gallery after splash animation ends
const splash = document.getElementById('splash');
splash.addEventListener('animationend', () => {
    splash.style.display = 'none';
    gallery.style.display = 'flex';
});

// Update link under image
function updateLink(i){
  const url = document.getElementById('link'+i).value;
  document.getElementById('a'+i).href = url;
}

// Upload image to Cloudinary (only from your device)
function uploadToCloud(slot){
  const myWidget = cloudinary.createUploadWidget({
    cloudName: cloudName,
    uploadPreset: uploadPreset,
    folder: folder,
    sources: ['local'],  // only local device
    multiple:false
  }, (error, result) => {
    if(!error && result && result.event==='success'){
      const imgUrl = result.info.secure_url;
      document.getElementById('slot'+slot).src = imgUrl;
    }
  });
  myWidget.open();
}

// Initialize gallery
loadGallery();
</script>

</body>
</html>
