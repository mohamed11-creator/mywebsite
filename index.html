<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BusinessLinks</title>
<style>
  body { margin:0; padding:0; font-family: Impact, Charcoal, sans-serif; background:white; color:black; text-align:center; }
  #splash { display:flex; justify-content:center; align-items:center; height:100vh; font-size:3em; }
  #gallery { display:none; padding:20px; }
  .grid { display:grid; grid-template-columns: repeat(auto-fill,minmax(120px,1fr)); gap:10px; }
  .slot { position:relative; width:100%; padding-top:177.77%; background:#f0f0f0; overflow:hidden; border-radius:8px; }
  .slot img { position:absolute; top:0; left:0; width:100%; height:100%; object-fit:cover; }
  .slot input[type="file"] { position:absolute; bottom:5px; left:5px; z-index:2; }
  .slot input[type="url"] { position:absolute; bottom:5px; right:5px; width:45%; }
</style>
<script src="https://widget.cloudinary.com/v2.0/global/all.js"></script>
</head>
<body>

<div id="splash">BusinessLinks</div>

<div id="gallery">
  <h1>BusinessLinks Gallery</h1>
  <div class="grid">
    <!-- 24 slots -->
    <script>
      for(let i=0;i<24;i++){
        document.write(`
        <div class="slot">
          <img src="" alt="">
          <input type="file" accept="image/*" onchange="uploadImage(this,${i})">
          <input type="url" placeholder="Enter link" onchange="setLink(this,${i})">
        </div>
        `);
      }
    </script>
  </div>
</div>

<script>
const cloudName = 'dsaxcy1sm'; // your Cloudinary cloud name
const uploadPreset = 'zrx3ywf6'; // your Cloudinary upload preset

const splash = document.getElementById('splash');
const gallery = document.getElementById('gallery');

// Splash fades in once then goes to gallery
setTimeout(()=>{
  splash.style.display='none';
  gallery.style.display='block';
},2000);

// Upload image to Cloudinary
function uploadImage(input, index){
  const file = input.files[0];
  if(!file) return;
  const url = `https://api.cloudinary.com/v1_1/${cloudName}/upload`;
  const formData = new FormData();
  formData.append('file', file);
  formData.append('upload_preset', uploadPreset);

  fetch(url, { method:'POST', body: formData })
    .then(res=>res.json())
    .then(data=>{
      input.previousElementSibling.src = data.secure_url;
      localStorage.setItem(`image${index}`, data.secure_url); // persist image URL
    })
    .catch(err=>console.error(err));
}

// Store link in localStorage
function setLink(input,index){
  localStorage.setItem(`link${index}`, input.value);
}

// Load saved images and links on page load
window.onload = function(){
  const slots = document.querySelectorAll('.slot');
  slots.forEach((slot,i)=>{
    const imgUrl = localStorage.getItem(`image${i}`);
    if(imgUrl) slot.querySelector('img').src = imgUrl;
    const linkVal = localStorage.getItem(`link${i}`);
    if(linkVal) slot.querySelector('input[type="url"]').value = linkVal;
  });
}
</script>

</body>
</html>
