<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BusinessLinks Gallery</title>
  <style>
    /* Splash screen */
    #splash {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: white;
      color: black;
      font-family: Impact, Charcoal, sans-serif;
      font-size: 3rem;
      animation: fadeOut 3s forwards 2s; /* fade out after 2s */
    }

    @keyframes fadeOut {
      to { opacity: 0; visibility: hidden; }
    }

    /* Main content hidden until splash ends */
    #main {
      display: none;
      padding: 20px;
      background-color: white;
      color: black;
      font-family: Impact, Charcoal, sans-serif;
      text-align: center;
    }

    /* Gallery grid */
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    /* Each item fixed 9:16 aspect ratio */
    .item {
      position: relative;
      width: 100%;
      padding-top: 177.78%; /* 9:16 ratio (16/9*100%) */
      background-color: #f0f0f0;
      border: 2px solid #ddd;
      overflow: hidden;
      border-radius: 8px;
    }

    .item img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .item a {
      display: block;
      margin-top: 5px;
      color: #007bff;
      text-decoration: none;
      font-size: 0.9rem;
      word-wrap: break-word;
    }

    .item a:hover {
      text-decoration: underline;
    }

    /* Upload button styling */
    #uploadContainer {
      margin: 20px auto;
    }

    #uploadBtn {
      padding: 10px 20px;
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      font-size: 1rem;
    }

    #uploadBtn:hover {
      background-color: #0056b3;
    }

  </style>
</head>
<body>
  <!-- Splash -->
  <div id="splash">BusinessLinks</div>

  <!-- Main gallery page -->
  <div id="main">
    <h1>BusinessLinks Gallery</h1>

    <!-- Upload button -->
    <div id="uploadContainer">
      <button id="uploadBtn">Upload Image</button>
    </div>

    <div class="gallery" id="gallery">
      <!-- 24 slots -->
      <!-- They will fill automatically after you upload images -->
      ${Array.from({ length: 24 }).map((_, i) => `
        <div class="item">
          <img id="img${i+1}" src="" alt="Image ${i+1}">
          <a id="link${i+1}" href="#" target="_blank">Add link here</a>
        </div>
      `).join('')}
    </div>
  </div>

  <!-- Cloudinary upload widget -->
  <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
  <script>
    // Show main content after splash
    setTimeout(() => {
      document.getElementById('splash').style.display = 'none';
      document.getElementById('main').style.display = 'block';
    }, 4000); // 4 seconds total

    // Cloudinary config
    const cloudName = 'dsaxcy1sm'; // your cloud name
    const uploadPreset = 'zrx3ywf6'; // your preset

    const uploadBtn = document.getElementById('uploadBtn');
    uploadBtn.addEventListener('click', function() {
      cloudinary.openUploadWidget(
        {
          cloudName: cloudName,
          uploadPreset: uploadPreset,
          sources: ['local'],
          multiple: false,
          maxFiles: 1
        },
        (error, result) => {
          if (!error && result && result.event === "success") {
            const uploadedImageUrl = result.info.secure_url;

            // Find first empty slot
            for (let i = 1; i <= 24; i++) {
              const imgEl = document.getElementById(`img${i}`);
              if (!imgEl.src || imgEl.src === window.location.href) {
                imgEl.src = uploadedImageUrl;
                break;
              }
            }
          }
        }
      );
    });
  </script>
</body>
</html>
