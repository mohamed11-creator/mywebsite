<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BusinessLinks</title>
<style>
body { margin:0; font-family:'Impact', Charcoal, sans-serif; background:white; color:black; text-align:center; }

/* Splash */
#splash {
  position:fixed; top:0; left:0; width:100%; height:100%;
  display:flex; justify-content:center; align-items:center;
  font-size:3em; opacity:0;
  animation:fadeInOut 2s forwards;
  z-index:10; background:white;
}
@keyframes fadeInOut { 0%{opacity:0;}50%{opacity:1;}100%{opacity:0;} }

/* Gallery */
#gallery {
  display:none;
  flex-wrap:wrap;
  justify-content:center;
  gap:20px;
  padding:20px;
  display:flex;
}
.item {
  width:90%; max-width:200px;
  text-align:center;
  border-radius:12px;
  padding:10px;
  background:#f5f5f5;
  border:1px solid #ddd;
  transition:transform 0.3s, box-shadow 0.3s;
}
.item:hover { transform:scale(1.05); box-shadow:0 6px 20px rgba(0,0,0,0.25); }
.item img {
  width:100%;
  aspect-ratio: 9 / 16;
  border-radius:10px;
  border:2px solid #333;
  object-fit:cover;
  margin-bottom:8px;
}
.item input.link-input {
  width:90%; margin-top:5px; text-align:center; padding:5px;
  border-radius:6px; border:1px solid #aaa;
}
.item a { display:block; margin-top:5px; color:#007BFF; text-decoration:none; font-weight:bold; word-wrap:break-word; }
.item a:hover { text-decoration:underline; }
button.upload-btn {
  margin-top:5px; padding:5px 10px;
  border:none; border-radius:6px;
  background:#007BFF; color:white;
  cursor:pointer; transition:background 0.3s;
}
button.upload-btn:hover { background:#0056b3; }

@media(max-width:600px){ 
  #splash{font-size:2em;} 
  .item{max-width:90%;} 
  button.upload-btn{width:80%;}
}
</style>
</head>
<body>

<div id="splash">BusinessLinks</div>
<div id="gallery"></div>

<script>
// CONFIG
const cloudName = 'dsaxcy1sm'; // your Cloudinary cloud name
const uploadPreset = 'zrx3ywf6'; // your unsigned preset
const folder = 'businesslinks_gallery';
const totalSlots = 24;

const gallery = document.getElementById('gallery');

// Splash animation ends → show gallery
const splash = document.getElementById('splash');
splash.addEventListener('animationend', () => {
    splash.style.display = 'none';
    gallery.style.display = 'flex';
    loadGallery();
});

// Create gallery slots
for(let i=0;i<totalSlots;i++){
  const div = document.createElement('div');
  div.className = 'item';
  div.innerHTML = `
    <img id="slot${i+1}" src="https://via.placeholder.com/200x356?text=Empty+Slot" alt="Image ${i+1}">
    <button class="upload-btn" onclick="uploadToCloud(${i+1})">Upload Image</button>
    <input class="link-input" id="link${i+1}" placeholder="Enter link" oninput="updateLink(${i+1})">
    <a id="a${i+1}" href="#" target="_blank">Visit Link ${i+1}</a>
  `;
  gallery.appendChild(div);
}

// Update link under image
function updateLink(i){
  const url = document.getElementById('link'+i).value;
  document.getElementById('a'+i).href = url;
}

// Upload image to Cloudinary
async function uploadToCloud(slot){
  const fileInput = document.createElement('input');
  fileInput.type = 'file';
  fileInput.accept = 'image/*';
  fileInput.onchange = async () => {
    const file = fileInput.files[0];
    const formData = new FormData();
    formData.append('file', file);
    formData.append('upload_preset', uploadPreset);
    formData.append('folder', folder);

    try {
      const res = await fetch(`https://api.cloudinary.com/v1_1/${cloudName}/image/upload`, {
        method: 'POST',
        body: formData
      });
      const data = await res.json();
      document.getElementById('slot'+slot).src = data.secure_url;
      alert('Image uploaded successfully! Refresh will keep it visible for everyone.');
    } catch(e){
      alert('Upload failed: '+e.message);
    }
  };
  fileInput.click();
}

// Load all images from Cloudinary folder
async function loadGallery(){
  try {
    // Frontend-only solution: Cloudinary requires signed URL for full listing
    // Instead, you must manually add public URLs of uploaded images to an array if unsigned listing not possible
    // For demonstration, we’ll just show what’s uploaded in this session
    console.log('Gallery loaded. Images are shown after upload.');
  } catch(e){
    console.log('Gallery load failed:', e.message);
  }
}
</script>

</body>
</html>
